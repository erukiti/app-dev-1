# 開発環境を作る

## ターミナル

## テキストエディタ・IDE


## Pythonの開発環境を作る

世の中には様々なプログラミング言語があり、様々な開発環境が存在します。
開発環境の選定を間違うと、非常に効率の悪い開発を行うことになりかねません。
この章では、個人的なおすすめのPythonの開発環境について記述します。

### Pythonのインストール

まず、Python本体のインストールを行います。
インストール方法は環境OS(Mac OSかWindowsか)によって異なりますが、重要なことは、
Pythonのバージョン管理を簡単に行うことができるように設定をすることです。

Python本体をOS上に直接インストールしてしまうと、バージョンの更新が非常に難しくなってしまいます。
執筆時点(2019年10月)のPythonのStableバージョンは3.8.0ですが、例えば3.9.0がリリースされた場合、
バージョンを更新するためには、OS上のPython環境を依存している設定ファイルなどを含めてすべて上書きする必要があります。

では、そもそもなぜPythonのバージョンを変更する必要があるのでしょうか。
Pythonに限らずプログラミング言語のバージョンアップでは、便利な記法の追加やパフォーマンスの向上、
バグの修正などが実施されていることが多いです。
なので、特別な理由がない限りは、最新の安定バージョンを利用するほうがメリットが多いのです。

Pythonのインストールは、バージョン管理ツールを介して行うことをおすすめします。
Pythonのバージョン管理ツールを介してPythonをインストールすることで、コマンド一つでPythonのバージョンを切り替えることも、
新しいバージョンのPythonをインストールする事もできます。

Pythonのバージョン管理を行うことができるツールとして大きく分けると下記2つが挙げられるかと思います。

* Anaconda
* pyenv

ざっくりとそれぞれの特徴について解説します。
AnacondaはMac OSとWindowsの両方に対応しています。
また、機械学習で利用するライブラリのデフォルトインストール、依存関係の解決などを行ってくれますので、
機械学習を利用する場合は、便利に利用することができます。
また、GUIが付属しておりますので、GUIでライブラリの追加やPythonの環境の作成などを行うことができます。
ただし、Anaconda自体が少しサイズが大きく、最小限の環境を構築したい、という用途には向きません。

pyenvはコマンドラインで使用するツールとなっており、GUIで操作することはできません。
また、Windowsには対応しておりません。
ですが、Mac OSの場合はhomebrewで簡単にインストールすることができ、pyenv自体のサイズも小さいため、
Macユーザーにとっては便利に利用することができるツールです。

最後に、クラウドの開発環境についても言及しておきます。
例えば、PythonであればGoogle　ColaboratoryやWanboxなどを利用すると、ローカルマシンにPythonをインストールすることなく、
Pythonのコードを実行することができます。
もちろん、クラウド開発環境には制限などはありますが、試しにコードを実行したい、という用途に関しては、
クラウドの開発環境でも十分だと思います。


### Pythonの開発で必要なツールたち

Python自体のインストールが環境すれば、Pythonのコードを書くことはできます。
ですが、チーム開発、プロダクションのコードを開発する上で、便利なツールを使うことで、
開発効率・品質の向上を達成することができます。
いくつかおすすめのツールについてご紹介いたします。

**Pylint**
Pythonのコード解析ツールになります。
Pythonらしくないコードの警告表示や、エラー表示などを行うことができます。
Pylintを使うことで、コードを書いている最中に、文法的におかしい部分やエラーの指摘が表示されるので、
開発効率・品質の向上が期待できます。
どうしても必要な記述に警告が出る場合は、ソースコード内に`#pylint: disable=`に警告を非常時にしたいルールを記述し、
その後`#pylint: enable=`に非表示にしたルールを再度有効にする設定をします。
これによって、コード内の一部のみPylintのルールを適用外に設定することが可能です。

**mypy**
Pythonは動的型付言語ですが、明示的に型情報をつけることも可能です。
ただし、型情報は実行時には評価されません。(例えば、int型で定義した変数にfloat型の値を代入しても実行時エラーにはなりません)
Python自体には型情報を評価する仕組みがないので、外部ツールを使って型情報の評価を行う必要があります。
そのためのツールとしてmypyの利用をおすすめします。
変数が定義されている型以外の値が代入されると、警告を表示することができます。

**black**
Pythonのコードフォーマッターになります。
複数人で開発をしていると、改行のタイミングがバラバラであることはよくあります。
ソースコードの書き方は統一されているべき、という考えに沿って、ソースコードを自動的に整形してくれるツールになります。
注意点として、以下2点を挙げておきます。

* Pythonコードがエラーの場合はコードの整形が実施されない
* blackのコードの整形ルールとPylintのルールが衝突する事があり、blackでコード整形後にPylintで警告が出ることがある

**Visual Studio Code(VSCode)**
テキストエディタではなく、統合開発環境として利用します。
上述した、「Pylint」、「mypy」、「black」をVSCodeに設定することで、VSCode上でコードの整形、警告の表示などを行うことが可能です。
また、jupyter notebookの直接編集・実行やPythonコードのデバッグ実行なども可能です。
Anacondaやpyenvで作成したPythonのバージョンを、VSCode内のPython環境に適用することも可能です。
Pythonをローカル環境で開発するためには、なくてはならないツールかと思います。


## Node.jsの開発環境を作る

### Node.jsのバージョン管理ツールのインストール

### Node.jsのインストール

## Docker
### NVIDIA Docker
### Radeon Open Compute

## 開発手順書
### 自動で動く開発手順書
## フレームワークという誘惑
## 開発環境のインフラはどうつくる
### 本番とのスペック差
### コスト
### 本番じゃないと動かない機能という強敵

開発のための環境が本番環境と違って、一部機能が動かないなどといったことはよくある話ですが、これは決して良いものではありません。個人のDockerでも開発環境でもステージング環境でも本番でも、何かしらのテクニック、たとえばダミーサーバーなどを作るなどして、同じように動くべきです。

## 自転車置き場の屋根の色議論の不毛
### 自動コードフォーマッタ
### Linter
